/*! Moip.js - build date: 2014-02-18 */
!function(t){function a(t){return t+="",t.replace(/[\s+|\.|\-]/g,"")}function e(){return this instanceof e?void 0:new e}var n=t.moip||{};t.moip=n,e.prototype={isValid:function(t){var n=e.prototype.cardType(t);if(t=a(t),n){if("HIPERCARD"===n.brand)return!0;for(var i=0,r=2-t.length%2;r<=t.length;r+=2)i+=parseInt(t.charAt(r-1),10);for(r=t.length%2+1;r<t.length;r+=2){var o=2*parseInt(t.charAt(r-1),10);i+=10>o?o:o-9}return i%10===0?!0:!1}return!1},cardType:function(t,e){var n,i,r={VISA:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/,MASTERCARD:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/,AMEX:/^3[4,7]\d{13}$/,DINERS:/^3[0,6,8]\d{12}$/,HIPERCARD:/^(606282\d{10}(\d{3})?)|(3841\d{15})$/,ELO:/^(636368|438935|504175|451416|636297|5067|4576|4011)/},o={VISA:/^4\d{3}-?\d{2}/,MASTERCARD:/^5[1-5]\d{2}-?\d{2}/,AMEX:/^3[4,7]\d{2}/,DINERS:/^3(?:0[0-5]|[68][0-9])+/,HIPERCARD:/^606282|3841\d{2}/,ELO:/^(636368|438935|504175|451416|636297|5067|4576|4011)/};t=a(t),e&&(r=o);for(n in r)r.hasOwnProperty(n)&&t.match(r[n])&&(i={brand:n});return i},isSecurityCodeValid:function(t,a){var e,i=n.creditCard.cardType(t);e="AMEX"===i.brand?4:3;var r=new RegExp("[0-9]{"+e+"}");return a.length===e&&r.test(a)},isExpiryDateValid:function(t,a){return t=parseInt(t,10),a=parseInt(a,10),1>t||t>12?!1:2!==(a+"").length&&4!==(a+"").length?!1:(2===(a+"").length&&(a=a>80?"19"+a:"20"+a),1e3>a||a>=3e3?!1:!e.prototype.isExpiredDate(t,a))},isExpiredDate:function(t,a){var e=new Date,n=("0"+(e.getMonth()+1)).slice(-2),i=e.getFullYear();if(t=("0"+t).slice(-2),2===a.toString().length){if(a>80)return!0;a="20"+a}var r=i+n,o=a+t;return parseInt(o,10)<parseInt(r,10)}},n.creditCard=e()}(window),function(t){var a=t.moip||{};t.moip=a,a.calculator={pricing:function(t){return this.buildJson(t)},buildJson:function(t){var a,e=[],n=[],i=[],r=[];if(a=this._calculateTransactionTax(t.amount,t.transaction_percentage,t.fixed),void 0!==t.antecipation_percentage&&void 0!==t.floating&&void 0!==t.installment){for(var o=0;11>=o;o++)e[o]=this._calculateInstallmentValue(t.amount,o+1),n[o]=this._calculateAntecipationPercentage(a,t,o,t.amount),i[o]=this._calculateTotalTax(n[o],a),r[o]=this._calculateLiquidValue(t.amount,i[o]);return{amount:t.amount,transaction_tax:a,antecipation_percentage:n,total_tax:i,liquid_value:r,installment_value:e}}return r=this._calculateLiquidValue(t.amount,a),{amount:t.amount,transaction_tax:a,liquid_value:r}},pricingWithInterest:function(t){for(var a=[],e=[],n=[],i=[],r=[],o=[],c=[],l=1;12>=l;l++)a[l-1]=this._calculateInterestRate(t.amount,t.interest_rate,l),e[l-1]=this._calculateAmount(a[l-1],l),n[l-1]=this._calculateTransactionTax(e[l-1],t.transaction_percentage,t.fixed),i[l-1]=this._calculateAntecipationPercentage(n[l-1],t,l-1,e[l-1]),r[l-1]=this._calculateAntecipationPercentageFromAmount(e[l-1],i[l-1]),o[l-1]=this._calculateTotalTax(i[l-1],n[l-1]),c[l-1]=this._calculateLiquidValue(e[l-1],o[l-1]);return{amount:e,transaction_tax:n,antecipation_percentage:r,total_tax:o,liquid_value:c,installment_value:a}},_calculateAntecipationPercentageFromAmount:function(t,a){return parseFloat(100*a/(t/100)).toFixed(2)},_calculateTransactionTax:function(t,a,e){return parseFloat(((t*(a/100)+e)/100).toFixed(2))},_calculateAntecipationPercentage:function(t,a,e,n){return parseFloat((parseFloat(a.antecipation_percentage/100/30*(30+15*e-a.floating))*parseFloat(n/100-t)).toFixed(2))},_calculateTotalTax:function(t,a){return parseFloat((t+a).toFixed(2))},_calculateLiquidValue:function(t,a){return parseFloat((t/100-parseFloat(a)).toFixed(2))},_calculateInstallmentValue:function(t,a){return parseFloat((t/a/100).toFixed(2))},_calculateInterestRate:function(t,a,e){return parseFloat(1===e?t/100:(this._coefficient(a,e)*(t/100)).toFixed(2))},_calculateAmount:function(t,a){return parseFloat(100*(t*a).toFixed(2))},_coefficient:function(t,a){return parseFloat((t/100/(1-1/Math.pow(t/100+1,a))).toFixed(10))}}}(window);